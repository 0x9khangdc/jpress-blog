#@layout()
#define css()
#@layout_css?()
<link rel="stylesheet" href="#(CPATH)/static/components/datepicker/css/bootstrap-datepicker3.min.css">
#end
#define script()
#@layout_script?()
<script src="#(CPATH)/static/components/datepicker/js/bootstrap-datepicker.min.js"></script>
<script src="#(CPATH)/static/components/datepicker/locales/bootstrap-datepicker.zh-CN.min.js"></script>
<script>
    $("input[hint='date']").datepicker({
        format: 'yyyy-mm-dd',
        language: 'zh-CN'
    });

    function doSubmit() {
        ajaxSubmit("#form", function (data) {
            $("#entryId").attr("value", data.id);
            toastr.success('内容保存成功。');
        })
    }

    $("#submit").on("click", function () {
        doSubmit();
    })

    $(".js-collapse").click(function () {
        $(this).toggleClass(" fa-chevron-down fa-chevron-up");
        $(this).parents('h4').next().toggle();
    })
</script>
#end

#define content()

<section class="content-header">
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-6">

                <div class="row mb-2">
                    <div class="col-sm-12">
                        <h1>
                            编辑/新增
                            <small data-toggle="tooltip" title="" data-placement="right"
                                   data-trigger="hover"><i class="nav-icon far fa-question-circle"></i></small>
                            <small> 首页 / Job / 编辑</small>
                        </h1>
                    </div>
                </div>
            </div>
        </div>

    </div><!-- /.container-fluid -->
</section>

<section class="content">
    <div class="row">
        <div class="col-12">
            <div class="card card-outline card-primary">
                <form class=" form-setting" autocomplete="off"
                      action="/admin/job/doSave"
                      method="POST" id="form">

                    <div class="card-body ">
                        <h4 class="form-header">基本信息</h4>
                        <input type="hidden" id="entryId" name="job.id" value="#(job.id ??)">
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">工作名称</label>
                            <div class="col-sm-6">

                                <input type="input" name="job.name" class="form-control" value="#(job.name ??)"
                                       placeholder="请为您的工作起个名字" required>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">选择分类</label>
                            <div class="col-sm-6">

                                <select class="form-control" name="job.category_id">
                                    #for(item : categoryList)
                                    <option value="#(item.id ??)" #if(item.id ??== job.category_id ??) selected #end>
                                        #(item.name ??)
                                    </option>
                                    #end
                                </select>

                            </div>
                        </div>


                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">选择部门</label>
                            <div class="col-sm-6">

                                <select class="form-control" name="job.dept_id">
                                    #for(item : deptList)
                                    <option value="#(item.id ??)" #if(item.id ??== job.deptId ??) selected #end>
                                        #(item.name ??)
                                    </option>
                                    #end
                                </select>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">工作地点</label>
                            <div class="col-sm-6">

                                <select class="form-control" name="job.address_id">
                                    #for(item : addressList)
                                    <option value="#(item.id ??)" #if(item.id ??== job.addressId ??) selected #end>
                                        #(item.name ??)
                                    </option>
                                    #end
                                </select>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">描述</label>
                            <div class="col-sm-6">

                                <input type="input" name="job.summary" class="form-control" value="#(job.summary ??)"
                                       placeholder="请输入描述">
                            </div>
                        </div>


                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">最小年龄</label>
                            <div class="col-sm-6">

                                <input type="number" name="job.age_start" class="form-control"
                                       value="#(job.age_start ??)"
                                       placeholder="请输入最小年龄" required>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">最大年龄</label>
                            <div class="col-sm-6">

                                <input type="number" name="job.age_end" class="form-control" value="#(job.age_end ??)"
                                       placeholder="请输入最大年龄" required>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">学历</label>
                            <div class="col-sm-6">

                                <select class="form-control" name="job.record">
                                    <option value="">请选择学历</option>
                                    <option #if(job.record ??== 0) selected #end value="0">不限制学历</option>
                                    <option #if(job.record ??== 1) selected #end value="1">专科</option>
                                    <option #if(job.record ??== 2) selected #end value="2">本科</option>
                                    <option #if(job.record ??== 3) selected #end value="3">硕士研究生</option>
                                    <option #if(job.record ??== 4) selected #end value="4">博士研究生</option>
                                </select>

                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">工作年限</label>
                            <div class="col-sm-6">

                                <select class="form-control" name="job.year">
                                    <option value="">请选择基层工作最低年限</option>
                                    <option #if(job.year ?? == 0) selected #end value="0">应届毕业生</option>
                                    <option #if(job.year ?? == 1) selected #end value="1">俩年以上(含俩年)</option>
                                    <option #if(job.year ?? == 2) selected #end value="2">三年以上(含三年)</option>
                                    <option #if(job.year ?? == 3) selected #end value="3">五年以上(含五年)</option>
                                </select>

                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">标签</label>
                            <div class="col-sm-6">

                                <input type="input" name="job.flag" class="form-control" value="#(job.flag ??)"
                                       placeholder="支持多个中间用逗号隔开">
                            </div>
                        </div>


                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">是否属于远程工作</label>
                            <div class="col-sm-6">

                                <input type="checkbox" class="switchery" data-for="job_isRemote" #checkedIf(job.isRemote
                                       ??)>
                                <input type="hidden" id="job_isRemote" name="job.isRemote">
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">工作类型</label>
                            <div class="col-sm-6">

                              <select class="form-control" name="job.job_type">
                                 <option #if(job.jobType ?? == 0) selected #end value="0">全职</option>
                                 <option #if(job.jobType ?? == 1) selected #end value="1">兼职</option>
                                 <option #if(job.jobType ?? == 2) selected #end value="2">钟点工</option>
                              </select>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">招聘类型</label>
                            <div class="col-sm-6">

                                <select class="form-control" name="job.recruitment_type">
                                    <option #if(job.recruitment_type ?? == 0) selected #end value="0">社招</option>
                                    <option #if(job.recruitment_type ?? == 1) selected #end value="1">校招</option>
                                    <option #if(job.recruitment_type ?? == 2) selected #end value="2">实习</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">岗位招聘人数</label>
                            <div class="col-sm-6">

                                <input type="input" name="job.people_count" class="form-control"
                                       value="#(job.people_count ??)"
                                       placeholder="请输入岗位招聘人数">
                            </div>
                        </div>


                        <h4 class="form-header">
                            其他信息
                            <a href="javascript:void(0)" class="float-right text-dark"><i
                                    class="fa fa-chevron-down js-collapse" aria-hidden="true"></i></a>
                        </h4>

                        <div class="display-none collapse-content" style="display: none">


                            <div class="form-group row">
                                <label class="col-sm-2 col-form-label">接收简历的邮箱</label>
                                <div class="col-sm-6">

                                    <input type="email" name="job.email" class="form-control" value="#(job.email ??)"
                                           placeholder="请输入邮箱">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-sm-2 col-form-label">岗位有效时间</label>
                                <div class="col-sm-6">

                                    <input type="input" class="form-control datetime" placeholder="点击选择"
                                           name="job.effective_time"
                                           value="#date(job.effective_time ?? now,'yyyy-MM-dd')">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-sm-2 col-form-label">岗位发布时间</label>
                                <div class="col-sm-6">

                                    <input type="input" class="form-control datetime" placeholder="点击选择" readonly
                                           name="job.release_time" value="#date(job.release_time ?? now,'yyyy-MM-dd')">
                                </div>
                            </div>


                            <div class="form-group row">
                                <label class="col-sm-2 col-form-label">SEO关键字</label>
                                <div class="col-sm-6">

                                    <input type="input" name="job.meta_keywords" class="form-control"
                                           value="#(job.meta_keywords ??)"
                                           placeholder="请输入SEO关键字">
                                </div>
                            </div>

                            <div class="form-group row">
                                <label class="col-sm-2 col-form-label">SEO描述信息</label>
                                <div class="col-sm-6">

                                    <input type="input" name="job.meta_description" class="form-control"
                                           value="#(job.meta_description ??)"
                                           placeholder="请输入SEO描述信息">
                                </div>
                            </div>

                        </div>

                    </div>
                    <!-- /.card-body -->
                    <div class="card-footer">
                        <div class="offset-sm-2 col-sm-10 submit-block">
                            <div class="card-submit">
                                <button id="submit" type="button" class="btn btn-primary">提交</button>
                            </div>
                        </div>
                    </div>
                    <!-- /.card-footer -->
                </form>
            </div>
        </div>
    </div>

</section>

#end
