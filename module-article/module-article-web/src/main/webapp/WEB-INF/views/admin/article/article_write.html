#@layout()
#define script()
<script src="#(CPATH)/static/components/vditor/dist/index.min.js"></script>
<script src="#(CPATH)/static/components/ckeditor5/ckeditor.js"></script>
<script src="#(CPATH)/static/components/editable/js/bootstrap-editable.min.js"></script>
<script src="#(CPATH)/static/components/selectize/selectize.min.js"></script>
<script src="#(CPATH)/static/components/highlight/highlight.pack.js"></script>

<script>

    var $select = $('.article-tags').selectize({
        plugins: ['remove_button'],
        delimiter: ',',
        persist: false,
        addPrecedence: true,
        create: true,
        render: {
            option_create: function (data, escape) {
                return '<div class="create" style="padding-left: 5px"> add tag:<strong style="color: #DD1144">' + escape(data.input) + '</strong></div>';
            }
        }
    });

    $(".newTag").each(function () {
        $(this).on('click', function () {
            $select[0].selectize.createItem($(this).text());
        })
    });

    $(".tflag").each(function () {
        $(this).on('click', function () {
            $("#flag").val($(this).text());
        })
    });

    $(".submitBtn").on("click", function () {
        $("#articleStatus").val($(this).attr("data-status"));
        doSubmit()

    });


    // Global function, at the CKEDITOR CTRL + S shortcut key, retain the Status of Article
    window.doSubmit = function (openPreview) {
        if (window.currentCKEditor) {
            $("#content").val(window.currentCKEditor.getData());
        } else if (window.currentVditor) {
            $("#content").val(window.currentVditor.getHTML());
        }

        ajaxSubmit("#form", function (data) {
            $("#articleId").attr("value", data.id);
            window.history.replaceState({}, '', `#(CPATH)/admin/article/write/` + data.id)
            toastr.success('The article is successfully preserved.')

            //Set preview road strength
            $("#preview").attr("href", "#(CPATH)/admin/preview?url=#(CPATH)/admin/article/preview/" + data.id);

            //If it is saved by the preview button, then open the preview window
            if (openPreview === true) {
                window.open("#(CPATH)/admin/preview?url=#(CPATH)/admin/article/preview/" + data.id);
            }

        });
    };


    //Preview Clicks
    function previewArticle($this) {

        if (!$this.href) {
            doSubmit(true)
        }

    }

    setSaveHotKeyFunction(doSubmit);

    /**
     * Shining diagram, remove the picture button function
     */
    $("#removeThumbnail").on("click", function () {
        $("#thumbnail").attr("src", "#(CPATH)/static/commons/img/nothumbnail.jpg");
        $("#articleThumbnail").val("");
    })


    /**
     * Switch the editor's button function
     * @param id
     */
    function doChangeEditor(id) {
        if (confirm('Are you sure you want to switch the editor? Switching may occur in the problem of lack of content in the front desk, and it is only valid for not publishing articles')) {
            var changeMode = editMode == "html" ? "markdown" : "html";
            if (id && id !== '0') {
                ajaxGet('#(CPATH)/admin/article/doChangeEditMode?id=' + id + "&mode=" + changeMode);
            } else {
                ajaxGet('#(CPATH)/commons/changeEditor/' + changeMode);
            }
        }
    }

    //Determine different editors by editing mode
    var editMode = "#(editMode ?? 'html')";
    if (editMode === 'html') {
        initCkEdtior('#editor');
    } else {
        initVdtior('editor');
    }


    $(".chooseAttachment").on("click", function () {
        var $this = $(this);
        layer.open({
            type: 2,
            title: 'Select an attachment',
            anim: 2,
            shadeClose: true,
            shade: 0.3,
            area: ['90%', '90%'],
            content: jpress.cpath + '/admin/attachment/browse?uititle=appendix',
            end: function () {
                if (layer.data.src != null) {

                    var src = jpress.cpath + layer.data.src;
                    //video ".mp4", ".avi", ".wmv", ".mpeg", ".mov", ".mkv", ".flv", ".rmvb", ".rm", ".3gp", ".ts", ".vob", ".m3u8"
                    if (src.endsWith(".mp4") || src.endsWith(".avi") || src.endsWith(".wmv") || src.endsWith(".mpeg") || src.endsWith(".mov")
                        || src.endsWith(".mkv") || src.endsWith(".flv") || src.endsWith(".rmvb") || src.endsWith(".rm") || src.endsWith(".3gp") ||
                        src.endsWith(".ts") || src.endsWith(".vob") || src.endsWith(".m3u8")) {

                        if (typeof currentCKEditor != 'undefined' && currentCKEditor) {
                            var video = document.createElement('video') // The content added can be customized. Here is an additional picture as an example
                            video.setAttribute('src', src)
                            video.setAttribute('style', 'max-width:100%;')
                            video.setAttribute('controls', 'controls')

                            insertHtmlToEditor(video.outerHTML);
                        } else if (currentVditor) {
                            currentVditor.insertValue('appendix:[' + layer.data.title + '](' + src + ')')
                        }


                    }

                    //image ".jpg", ".jpeg", ".png", ".bmp", ".gif", ".webp"
                    else if (src.endsWith(".jpg") || src.endsWith(".jpeg") || src.endsWith(".png")
                        || src.endsWith(".bmp") || src.endsWith(".gif") || src.endsWith(".webp")) {

                        if (typeof currentCKEditor != 'undefined' && currentCKEditor) {
                            var img = document.createElement('img') // The content added can be customized. Here is an additional picture as an example
                            img.setAttribute('src', src)
                            insertHtmlToEditor(img.outerHTML);
                        } else if (currentVditor) {
                            //![图片alt](图片地址 ''图片title'')
                            currentVditor.insertValue('![' + layer.data.title + '](' + src + ')')
                        }
                    }
                    // other file
                    else {
                        if (typeof currentCKEditor != 'undefined' && currentCKEditor) {
                            var a = document.createElement('a') // The content added can be customized. Here is an additional picture as an example
                            a.setAttribute('href', src)
                            a.setAttribute("target", "_blank")
                            a.innerHTML = layer.data.title;
                            insertHtmlToEditor('appendix:' + a.outerHTML);
                        } else if (currentVditor) {
                            currentVditor.insertValue('appendix:[' + layer.data.title + '](' + src + ')')
                        }
                    }
                }
            }
        });
    })


    function insertHtmlToEditor(html) {
        const viewFragment = currentCKEditor.data.processor.toView(html);
        const modelFragment = currentCKEditor.data.toModel(viewFragment);
        currentCKEditor.model.insertContent(modelFragment, currentCKEditor.model.document.selection);
    }

    $(function () {
        // 设置按钮
        $("#rightSwitch").click(function () {
            $(this).toggleClass('switch-btn');
            $(".rightPanel").toggle();
            $(".leftPanel").toggleClass("col-lg-12", "col-lg-3");
        });
        // 设置编辑器的高度
        var headerHeight = $(".article-header ").innerHeight();
        var mainHeight = $(".main-header").innerHeight();
        var editorHeight = $(window).height() - parseFloat(headerHeight) - parseFloat(mainHeight);
        $('#editor').css({
            "min-height": editorHeight
        })
    })

</script>

<!-- 选择视频-->
<script>
    //插入视频
    $(".chooseVideo").on("click", function () {
        var $this = $(this);
        layer.open({
            type: 2,
            title: 'Choose a video',
            anim: 2,
            shadeClose: true,
            shade: 0.3,
            area: ['90%', '90%'],
            content: jpress.cpath + '/admin/attachment/video/browse?uititle=video',
            end: function () {

                if (layer.data.uid != null) {

                    var uid = layer.data.uid;
                    // var cloudType = layer.data.type;
                    var cover = jpress.cpath + layer.data.cover;

                    if (typeof currentCKEditor != 'undefined' && currentCKEditor) {

                        var video = document.createElement('video')
                        video.setAttribute("data-vid", uid)
                        video.setAttribute("poster", cover);
                        video.setAttribute('style', "height:240px;width:425px;")
                        video.setAttribute("class", "jpress-video");

                        //视频播放容器的id
                        var idStr = "video_player_container"+(Math.random()).toString().slice(5,10)
                        video.setAttribute('id', idStr);

                        insertHtmlToEditor(video.outerHTML);

                    } else if (currentVditor) {
                        alert("This editor does not support inserting videos for the time being!")
                    }
                }
            }
        });

    })


    //选择表单
    $(".chooseForm").on("click", function () {
        var $this = $(this);

        layer.open({
            type: 2,
            title: 'Select form',
            anim: 2,
            shadeClose: true,
            shade: 0.3,
            area: ['90%', '90%'],
            content: jpress.cpath + '/admin/form/browse',
            end: function () {

                if (layer.data.uid) {

                    var formUUID = layer.data.uid;

                    var formName = layer.data.name;

                    let html = '<div><div class="jpress-form-card" contenteditable="false" data-form-id=' + formUUID + '>' + formName + '(Form)</div></div><br />'

                    insertHtmlToEditor(html);

                } else  {
                    alert("Please check the form")
                }

            }
        })

    })

</script>

#end
#define css()
<link href="#(CPATH)/static/components/editable/css/bootstrap-editable.css" rel="stylesheet">
<link href="#(CPATH)/static/components/selectize/css/selectize.css" rel="stylesheet">
<link href="#(CPATH)/static/components/selectize/css/selectize.bootstrap4.css" rel="stylesheet">
<link href="#(CPATH)/static/components/highlight/styles/github.css" rel="stylesheet">
<link href="#(CPATH)/static/components/vditor/dist/index.css" rel="stylesheet">

<style>
    .main-footer.text-sm, .main-footer {
        display: none !important;
    }

    .content-wrapper {
        position: relative;
        min-height: calc(100vh - calc(3.5rem + 1px));
        overflow: hidden;
    }

    .panelContainer {
        position: relative;
        height: calc(100% - 71px);
    }

    .popover-content {
        padding: 9px 14px;
        margin: 0 10px;
    }

    #slug {
        cursor: pointer;
    }

    .vditor-wysiwyg pre.vditor-reset:focus {
        outline: none;
        background-color: #fff;
    }
    .article-header i {
        font-size: 22px;
        cursor: pointer;
    }

    .boder-bottom {
        border-bottom: 1px solid #d9d9d9;
    }

    .setting-dropmenu {
        width: 300px;
        top: 100%;
        left: initial !important;
        right: 0;
    }

    .tab-content {
        height: 100%;
    }

    .leftPanel {
        width: 100%;
        height: 100%;
        overflow-y: scroll;
        scrollbar-width: none;
        -ms-overflow-style: none;
    }

    .leftPanel::-webkit-scrollbar {
        width: 0;
    }

    .rightPanel {
        position: sticky;
        height: 100%;
        overflow-y: scroll;
    }

    .pannel-inner {
        width: 100%;
        height: auto;
        padding-left: 0 !important;
        overflow-x: hidden;
    }

    #formAttrTab .nav-link {
        padding-left: 1rem;
        padding-right: 1rem;
        border: none;
        border-bottom: 4px solid #fff;
        position: relative;
        top: -1px;
        color: #333;
        font-size: 15px;
    }

    #formAttrTab .nav-link.active {
        border: none;
        border-bottom: 4px solid #0056b3;
        color: #0056b3;
        font-size: 15px;
    }

    .dropdown-item {
        padding: .75rem 1rem;
    }

    .card {
        margin-bottom: 0;
        border-radius: 0;
    }

    .ck-editor__editable_inline{
        height: calc(100vh - 158px);
    }

    #rightSwitch {
        display: inline-block;
        padding: 3px 6px 2px;
        border-radius: 4px;
        cursor: pointer;
        border: 1px solid #fff;
    }

    .switch-btn {
        display: inline-block;
        padding: 3px 6px 2px;
        border-radius: 4px;
        cursor: pointer;
        background-color: #000;
        border: 1px solid #000;
    }

    .switch-btn i, .switch-btn-active i {
        color: #fff;
        font-size: 18px !important;
        vertical-align: middle;
    }

    .switch-btn-active {
        border: 1px solid #fff;
        background-color: #fff;
    }

    .switch-btn-active i {
        font-size: 18px !important;
        color: #0069d9;
    }

    .ck-editor .ck-sticky-panel .ck-sticky-panel__content .ck-toolbar_grouping {
        background: #fff;
        height: 45px;
        border-top: none;
    }

    .vditor {
        border-top: none;
    }

    .vditor-toolbar {
        padding-left: 64px;
        height: 45px;
        background: #fff;
        display: flex;
        align-items: center;
    }

    .vditor-hint {
        background: #f6f6f6;
    }

    .vditor-hint:before {
        border-bottom-color: #f6f6f6;
    }
    .ck-source-editing-area{
        min-height:100vh;
        height:auto;
    }
</style>
#end

#define content()
<section class="content" style="position: absolute;height:100%;width:100%;padding: 0">

    <form action="#(CPATH)/admin/article/doWriteSave" method="post" id="form" class="h-100 bg-white">
        <section class="article-header d-flex justify-content-between align-items-center p-3 boder-bottom bg-white">
            <div class="d-flex align-items-center justify-content-between" style="width: 40%">
                <div class="input-group mr-2">
                    <div class="input-group-prepend">
                        <span class="input-group-text">title</span>
                    </div>
                    <input type="text" class="form-control" placeholder="Please enter the article title..." name="article.title"
                           autocomplete="off"
                           id="article-title"
                           value="#(article.title ??)">
                </div>

                <div class="dropdown">
                    <button class="btn btn-primary dropdown-toggle" type="button" id="insertFile" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                        insert...
                    </button>
                    <div class="dropdown-menu" aria-labelledby="insertFile">
                        <a class="dropdown-item chooseAttachment" href="#">Insert annex</a>
                        <a class="dropdown-item chooseVideo" href="#">Insert video</a>
                        <a class="dropdown-item chooseForm" href="#">Insert form</a>
                    </div>
                </div>
            </div>
            <div class="d-flex align-items-center justify-content-between">
                <button type="button" data-status="draft" class="btn btn-secondary mr-2 submitBtn">save draft</button>
                <a target="_blank" #if(article.id ??)
                   href="#(CPATH)/admin/preview?url=#(CPATH)/admin/article/preview/#(article.id ??)" #else
                   onclick="previewArticle(this)" #end
                   id="preview" class="btn btn-secondary mr-2"><span>Preview</span></a>
                <button type="button" data-status="normal" class="btn btn-primary mr-2 submitBtn">release</button>
                <span class="switch-btn" id="rightSwitch"><i class="bi bi-gear" style="font-size:18px"></i></span>
                <span data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" class="pl-2"><i
                        class="bi bi-three-dots-vertical"></i></span>
                <div class="dropdown-menu mr-2">
                    <a class="dropdown-item submitBtn" data-status="trash" href="javascript:;">Move to a trash can</a>
                    <a class="dropdown-item" href="javascript:;" onclick="doChangeEditor()">Switch editor</a>
                </div>
            </div>
        </section>

        <input type="hidden" id="articleStatus" name="article.status" value='#(article.status ?? "draft")'>
        <input type="hidden" id="articleId" name="article.id" value="#(article.id ??)">
        <input type="hidden" id="appId" name="appId" value="#(appId ??)">
        <input type="hidden" name="article.user_id" value="#(article.user_id ?? USER.id)">
        <input type="hidden" id="editModeId" name="article.edit_mode" value="#(editMode ??)">
        <div class="row panelContainer">
            <div class="col-lg-9  leftPanel pr-0">
                <div class="pannel-inner">
                    <div class="form-group mb-0">
                        <div class="">
                            <div id="editor" style="height:auto;">#(article.orignalContent ??)</div>
                            <input type="hidden" name="article.content" id="content"/>
                        </div>
                    </div>
                </div>

            </div>
            <div class="col-lg-3 pl-0 pr-0 rightPanel">
                <div class="pannel-inner">
                    <ul class="nav nav-tabs" id="formAttrTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" data-toggle="tab"
                               href="#main-tab" role="tab" aria-controls="component" aria-selected="true">article</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#template-tab" role="tab"
                               aria-controls="module" aria-selected="false">template</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#extend-tab" role="tab"
                               aria-controls="module" aria-selected="false">Expand</a>
                        </li>
                    </ul>
                    <div class="tab-content ">
                        <div class="tab-pane fade show active" id="main-tab" role="tabpanel">
                            <div class="accordion">


                                <!--基础-->
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="mb-0">
                                            <button class="btn btn-link btn-block text-left text-dark" type="button"
                                                    data-toggle="collapse" data-target="#fields-card">
                                                Base
                                                <span class="float-right"><i class="bi bi-chevron-down"></i></span>
                                            </button>
                                        </h2>
                                    </div>
                                    <div id="fields-card" class="collapse">
                                        <div class="card-body">


                                            <div class="form-group">
                                                <label class="col-sm-12">Thesis</label>
                                                <div class="col-sm-12">
                                                    <textarea class="form-control"
                                                              id="summary"
                                                              name="article.summary"
                                                              placeholder="please enter" rows="4">#(article.summary ??)</textarea>
                                                    <p class="text-muted"></p>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-12">Sorting serial number</label>
                                                <div class="col-sm-12">
                                                    <input type="text" class="form-control"
                                                           id="order_number"
                                                           name="article.order_number"
                                                           placeholder="please enter" value="#(article.order_number ??0)"/>
                                                    <p class="text-muted">The article list will be sorted according to this value, the larger the more advanced.</p>
                                                </div>
                                            </div>


                                            <div class="form-group">
                                                <label class="col-sm-12">External chain</label>
                                                <div class="col-sm-12">
                                                    <input type="text" class="form-control"
                                                           id="link_to"
                                                           name="article.link_to"
                                                           placeholder="please enter" value="#unescape(article.link_to ??)"/>
                                                    <p class="text-muted">After filling in the external link, browsing the article will jump to this link.</p>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-12">release time</label>
                                                <div class="col-sm-12">
                                                    <input type="text" class="form-control datetime"
                                                           id="created"
                                                           name="article.created"
                                                           placeholder="please enter" value="#date(article.created ??)"/>
                                                    <p class="text-muted"></p>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>


                                <!--固定链接-->
                                <div class="card">
                                    <div class="card-header" id="heading2">
                                        <h2 class="mb-0">
                                            <button class="btn btn-link  btn-block text-left text-dark" type="button"
                                                    data-toggle="collapse" data-target="#slug-card">
                                                Fixed link
                                                <span class="float-right"><i class="bi bi-chevron-down"></i></span>
                                            </button>
                                        </h2>
                                    </div>
                                    <div id="slug-card" class="collapse">
                                        <div class="card-body">
                                            URL:<span
                                                class="domainSpan">#option('web_domain')</span>#(CPATH)/article/<span
                                                id="slug"
                                                class="slugSpan"
                                                for-input="article-slug">#(article.slug ??)</span>#if(option("web_fake_static_enable"))#option('web_fake_static_suffix')#end
                                            #if(article && article.isNormal())
                                            (<a href="#(article.url)" target="_blank">access</a>)
                                            #end
                                            <input type="hidden" id="article-slug" name="article.slug"
                                                   value="#(article.slug ??)">

                                        </div>
                                    </div>
                                </div>


                                <!--分类-->
                                <div class="card">
                                    <div class="card-header" id="heading3">
                                        <h2 class="mb-0">
                                            <button class="btn btn-link btn-block text-left text-dark" type="button"
                                                    data-toggle="collapse" data-target="#category-card">
                                                Classification
                                                <span class="float-right"><i class="bi bi-chevron-down"></i></span>
                                            </button>
                                        </h2>
                                    </div>
                                    <div id="category-card" class="collapse">
                                        <div class="card-body">
                                            <div class="form-group">
                                                #for(category : categories)
                                                <div>
                                                    <label>
                                                        #for(i = 0; i < category.layerNumber; i++)
                                                        &nbsp;&nbsp;
                                                        #end

                                                        #if(category.isCheck)
                                                        <input type="checkbox" name="category" value="#(category.id)"
                                                               checked/>
                                                        #else
                                                        <input type="checkbox" name="category" value="#(category.id)"/>
                                                        #end

                                                        #(category.title ??)
                                                    </label>
                                                </div>
                                                #else
                                                No classification
                                                #end
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <!--图片-->
                                <div class="card">
                                    <div class="card-header" id="heading5">
                                        <h2 class="mb-0">
                                            <button class="btn btn-link  btn-block text-left text-dark" type="button"
                                                    data-toggle="collapse" data-target="#image-card">
                                                picture
                                                <span class="float-right"><i class="bi bi-chevron-down"></i></span>
                                            </button>
                                        </h2>
                                    </div>
                                    <div id="image-card" class="collapse">
                                        <div class="card-body p-0">
                                            <img src="#(CPATH)#(article.thumbnail ?? '/static/commons/img/nothumbnail.jpg')"
                                                 style="width: 100%;max-height: 500px"
                                                 id="thumbnail">
                                            <input type="hidden" value="#(article.thumbnail ??)"
                                                   name="article.thumbnail"
                                                   id="articleThumbnail">
                                        </div>
                                        <div class="card-footer">
                                            <button type="button" class="btn-image-browser btn btn-default btn-sm "
                                                    for-src="thumbnail"
                                                    for-input="articleThumbnail">Select Image
                                            </button>
                                            <a href="javascript:;" style="padding-left: 15px"
                                               id="removeThumbnail">Remove</a>
                                        </div>
                                    </div>
                                </div>


                                <!--标签-->
                                <div class="card">
                                    <div class="card-header" id="heading4">
                                        <h2 class="mb-0">
                                            <button class="btn btn-link btn-block text-left text-dark" type="button"
                                                    data-toggle="collapse" data-target="#tags-card">
                                                Label
                                                <span class="float-right"><i class="bi bi-chevron-down"></i></span>
                                            </button>
                                        </h2>
                                    </div>
                                    <div id="tags-card" class="collapse">
                                        <div class="card-body">
                                            <select class="form-control article-tags" multiple="multiple" name="tag">
                                                #for(tag : tags)
                                                <option value="#(tag.title ??)" selected>#(tag.title ??)</option>
                                                #end
                                            </select>
                                            <p class="text-muted">Please use the "Enter" or English commas (,) to separate multiple labels.</p>

                                            <div class="tags">
                                                #tags(count = 20)
                                                #for(tag : tags)
                                                <a href="javascript:;" class="newTag">#(tag.title)</a>
                                                #end
                                                #end
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <!--SEO-->
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="mb-0">
                                            <button class="btn btn-link btn-block text-left text-dark" type="button"
                                                    data-toggle="collapse" data-target="#seo-card">
                                                SEO
                                                <span class="float-right"><i class="bi bi-chevron-down"></i></span>
                                            </button>
                                        </h2>
                                    </div>
                                    <div id="seo-card" class="collapse">
                                        <div class="card-body">

                                            <div class="form-group">
                                                <label class="col-sm-12">Seo title</label>
                                                <div class="col-sm-12">
                                                    <input type="input" class="form-control" placeholder="please enter"
                                                           id="meta_title" name="article.meta_title"
                                                            value="#(article.meta_title ??)">
                                                    <p class="text-muted"></p>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-12">SEO keyword</label>
                                                <div class="col-sm-12">
                                                    <textarea class="form-control" id="meta_keywords"
                                                              name="article.meta_keywords" placeholder="please enter"
                                                              rows="2">#(article.meta_keywords ??)</textarea>
                                                    <p class="text-muted"></p>
                                                </div>
                                            </div>

                                            <div class="form-group">
                                                <label class="col-sm-12">Seo description</label>
                                                <div class="col-sm-12">
                                                    <textarea class="form-control" id="meta_description"
                                                              name="article.meta_description" placeholder="please enter"
                                                              rows="2">#(article.meta_description ??)</textarea>
                                                    <p class="text-muted"></p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <!--状态-->
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="mb-0">
                                            <button class="btn btn-link btn-block text-left text-dark" type="button"
                                                    data-toggle="collapse" data-target="#status-card">
                                                state
                                                <span class="float-right"><i class="bi bi-chevron-down"></i></span>
                                            </button>
                                        </h2>
                                    </div>
                                    <div id="status-card" class="collapse">
                                        <div class="card-body">

                                            <div class="form-group row">
                                                <label class="col-sm-9"
                                                       style="padding-top:7.5px;padding-left:15px">Allow comments</label>
                                                <div class="col-sm-3">
                                                    <input type="checkbox" class="switchery" #checkedIf(article.comment_status ?? true)
                                                           data-for="comment_status" value="true">
                                                    <input type="hidden" id="comment_status" name="article.comment_status">
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-sm-9"
                                                       style="padding-top:7.5px;padding-left:15px">Whether to recommend</label>
                                                <div class="col-sm-3">
                                                    <input type="checkbox" class="switchery" #checkedIf(article.with_recommend ??)
                                                           data-for="with_recommend" value="true">
                                                    <input type="hidden" id="with_recommend" name="article.with_recommend">
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-sm-9"
                                                       style="padding-top:7.5px;padding-left:15px">Whether to</label>
                                                <div class="col-sm-3">
                                                    <input type="checkbox" class="switchery" #checkedIf(article.with_top ??)
                                                           data-for="with_top" value="true">
                                                    <input type="hidden" id="with_top" name="article.with_top">
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-sm-9"
                                                       style="padding-top:7.5px;padding-left:15px">Whether it is popular</label>
                                                <div class="col-sm-3">
                                                    <input type="checkbox" class="switchery" #checkedIf(article.with_hot ??)
                                                           data-for="with_hot" value="true">
                                                    <input type="hidden" id="with_hot" name="article.with_hot">
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-sm-9"
                                                       style="padding-top:7.5px;padding-left:15px">Whether a headline</label>
                                                <div class="col-sm-3">

                                                    <input type="checkbox" class="switchery" #checkedIf(article.with_lead_news ??)
                                                           data-for="with_lead_news" value="true">
                                                    <input type="hidden" id="with_lead_news" name="article.with_lead_news">
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <label class="col-sm-9" style="padding-top:7.5px;padding-left:15px">Whether to be searched</label>
                                                <div class="col-sm-3">
                                                    <input type="checkbox" class="switchery" #checkedIf(article.with_allow_search ?? true)
                                                           data-for="with_allow_search" value="true">
                                                    <input type="hidden" id="with_allow_search" name="article.with_allow_search">
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>


                        <!--模板 tab -->
                        <div class="tab-pane fade" id="template-tab" role="tabpanel">
                            <div class="accordion">

                                <!--模板-->
                                <div class="card">
                                    <div class="card-header" id="heading10">
                                        <h2 class="mb-0">
                                            <button class="btn btn-link btn-block text-left text-dark" type="button"
                                                    data-toggle="collapse" data-target="#template-card">
                                                template
                                                <span class="float-right"><i class="bi bi-chevron-down"></i></span>
                                            </button>
                                        </h2>
                                    </div>
                                    <div id="template-card" class="collapse show">
                                        <div class="card-body">
                                            <div class="form-group row">
                                                <label class="col-sm-12">Rendering template file</label>
                                                <select class="form-control" name="article.style">
                                                    <option value="">Default (article.html)</option>
                                                    #for(style : styles)
                                                    <option value="#(style)" #selectedIf(article &&
                                                            article.style==style)>
                                                        article_#(style).html
                                                    </option>
                                                    #end
                                                </select>
                                            </div>

                                            <div class="form-group row">
                                                <label class="col-sm-12">Articles</label>
                                                <input type="text" class="form-control" name="article.flag"
                                                       placeholder="Articles" value="#(article.flag ??)" id="flag"/>
                                                #if(flags && flags.size() > 0)
                                                <p class="text-muted">The display logo supported by the current template is:</p>
                                                <div class="tags">
                                                    #for(flag : flags ??)
                                                    <a href="javascript:;" class="tflag">#(flag)</a>
                                                    #end
                                                </div>
                                                #end
                                            </div>
                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>


                        <!--扩展 tab-->
                        <div class="tab-pane fade" id="extend-tab" role="tabpanel">
                            <div class="accordion">

                                <!--扩展属性-->
                                <div class="card">
                                    <div class="card-header">
                                        <h2 class="mb-0">
                                            <button class="btn btn-link btn-block text-left text-dark" type="button"
                                                    data-toggle="collapse" data-target="#extend-card">
                                                Extended attribute
                                                <span class="float-right"><i class="bi bi-chevron-down"></i></span>
                                            </button>
                                        </h2>
                                    </div>
                                    <div id="extend-card" class="collapse show">
                                        <div class="card-body">

                                            #(fields.render('No extension field'))

                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </form>
</section>
#end
